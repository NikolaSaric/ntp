<app-navbar></app-navbar>

<div class="form-wrapper" >
  <mat-card class="box">
    <mat-card-header>
      Add new post
    </mat-card-header>

    <form class="form" [formGroup]="addPostForm" (ngSubmit)="addPostForm.valid && onAddPostSubmit()" noval>
      <mat-card-content>
        <mat-form-field class="field-full-width">
          <input
            matInput
            formControlName="name"
            placeholder="Title" />
            <mat-error >Missing title.</mat-error>
        </mat-form-field>

        <div formArrayName="links">
            <button type="button" (click)="addLink()">Add Link</button>
            <div *ngFor="let cat of addPostForm.controls.links.controls; let i = index" >
                <mat-form-field>
                <input matInput formControlName="{{i}}" placeholder="Link"/>
                <mat-error >Link is empty.</mat-error> 
            </mat-form-field>
                <button type="button" (click)="removeLink(i)">Remove Link</button>
            </div>
          </div>
        
        <div formArrayName="tags">
            <button type="button" (click)="addTag()">Add Tag</button>
            <div *ngFor="let cat of addPostForm.controls.tags.controls; let i = index" >
                <mat-form-field>
                <input matInput formControlName="{{i}}" placeholder="Tag"/>
                <mat-error >Tag is empty.</mat-error> 
            </mat-form-field>
                <button type="button" (click)="removeTag(i)">Remove Tag</button>
            </div>
          </div>
          

          <mat-form-field>
            <textarea
            matInput
            formControlName="description"
            placeholder="Description">
            </textarea>
            <mat-error>Max 250 characters.</mat-error>
        </mat-form-field>
        
      </mat-card-content>
      <button mat-stroked-button color= "primary" class="btn-block">Add Post</button>
    </form>
  </mat-card>

</div>